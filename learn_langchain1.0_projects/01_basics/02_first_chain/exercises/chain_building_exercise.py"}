\"\"\"\nğŸ“š é“¾æ¡æ„å»ºç»ƒä¹  - L1-W2 Chain Building Practice\nChain Fundamentals Exercises for Foundation Level\n\"\"\"\n\nimport os\nimport time\nfrom typing import Dict, Any, Optional\nfrom langchain.llms import OpenAI\nfrom langchain import PromptTemplate, LLMChain"\nfrom dotenv import load_dotenv\n\n# åŠ è½½ç¯å¢ƒé…ç½®\nenv_path = os.path.join(os.path.dirname(__file__), '../../.env.chinese-models')\nload_dotenv(env_path)\n\nclass ChainBuildingExercises:\n    \"\"\"ğŸ§  é“¾æ¡æ„å»ºåŸºç¡€ç»ƒä¹ é¢˜é›†åˆ\"\"\"\n    \n    def __init__(self):\n        self.llm = OpenAI(\n            openai_api_key=os.getenv(\"OPENAI_API_KEY\", \"demo_key\"),\n            model_name=\"gpt-3.5-turbo\",\n            temperature=0.7,\n            max_tokens=500\n        )\n        \n    def exercise_01_simple_chain(self, student_name: str = \"å­¦ä¹ è€…\") -\u003e str:\n        \"\"\"ğŸ¯ åŸºç¡€ç»ƒä¹ é¢˜1: ç®€å•é“¾æ¡\n        \n        ä»»åŠ¡: æ„å»ºä¸€ä¸ªé—®å€™å­¦ä¹ è€…çš„é“¾æ¡\n        è¦æ±‚:\n        - ä½¿ç”¨æä¾›çš„student_nameå˜é‡\n        - è¾“å‡ºå‹å¥½ã€é¼“åŠ±æ€§çš„é—®å€™\n        - åŒ…å«å­¦ä¹ å»ºè®®\n        \"\"\"\n        \n        # TODO 1.1: åˆ›å»ºç®€å•çš„Promptæ¨¡æ¿\n        # æ¨¡æ¿åº”è¯¥åŒ…å«: å­¦ç”Ÿå§“å + å­¦ä¹ ä¸»é¢˜ + é¼“åŠ±è¯è¯­\n        # ç¤ºä¾‹: \"ä½ å¥½{student_name}ï¼Œæ¬¢è¿æ¥åˆ°LangChainå­¦ä¹ æ—…ç¨‹...\"\n        \n        prompt_template = \"\"\"# ğŸ¯ TODO: è¯·åœ¨æ­¤å¤„æ„å»ºä½ çš„æç¤ºæ¨¡æ¿\n        # è¯·åˆ›å»ºä¸€ä¸ªåŒ…å«{student_name}çš„å‹å¥½é—®å€™æ¨¡æ¿\n        # å»ºè®®åŒ…å«:\n        # - ä¸ªæ€§åŒ–ç§°å‘¼\n        # - å­¦ä¹ é¢†åŸŸä»‹ç»\n        # - é¼“åŠ±æ€§è¯è¯­\n        # - å…·ä½“å­¦ä¹ å»ºè®®\n        \"\"\"\n        \n        # TODO 1.2: åˆ›å»ºå¹¶è¿è¡Œé“¾æ¡\n        # ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„promptå’Œself.llmæ„å»ºLLMChain\n        \n        # å®ç°ä»£ç  here:\n        # =============== å¼€å§‹ç¼–å†™ ===============\n        \n        \n        \n        # =============== å®Œæˆæäº¤ ===============\n        \n        # è¿”å›å€¼åŒ…å«ç»“æœ\n        # return result  # è¯·å°†ç»“æœè¿”å›\n        \n        return \"âœ… ç»ƒä¹ å®Œæˆ - è¯·åˆ é™¤æ­¤è¡Œå¹¶å¡«å…¥ä½ çš„å®ç°\"\n    \n    def exercise_02_business_greeting(self, partner_info: Dict[str, str]) -\u003e str:\n        \"\"\"\ğŸ¯ åŸºç¡€ç»ƒä¹ é¢˜2: å•†åŠ¡é—®å€™é“¾\n        \n        ä»»åŠ¡: æ„å»ºä¼ä¸šçº§å•†åŠ¡é—®å€™é“¾æ¡\n        è¦æ±‚:\n        - å¤šè¯­è¨€æ”¯æŒ (æ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡)\n        - ä¸“ä¸šå•†åŠ¡è¯­è°ƒ\n        - ç¬¦åˆç›®æ ‡å›½å®¶æ–‡åŒ–\n        \"\"\"\n        \n        # TODO 2.1: è®¾è®¡ä¼ä¸šçº§Promptæ¨¡æ¿\n        business_template = f\"\"\"\r\n        # \ud83d\udcbc TODO: æ„å»ºä¼ä¸šçº§å•†åŠ¡é—®å€™æ¨¡æ¿\r\n        \r\n        èƒŒæ™¯ä¿¡æ¯:\r\n        - å›½å®¶: {partner_info.get('country', 'æœªçŸ¥')}\r\n        - åˆä½œä¼™ä¼´: {partner_info.get('name', 'ä¼™ä¼´')}\r\n        - ç›®æ ‡è¯­è¨€: {partner_info.get('language', 'ä¸­æ–‡')}\r\n        - ä¸šåŠ¡é¢†åŸŸ: {partner_info.get('business_domain', 'é€šç”¨')}\r\n        \r\n        æ¨¡æ¿è¦æ±‚:\r\n        1. ä½¿ç”¨ç›®æ ‡è¯­è¨€\r\n        2. ä¸“ä¸šå•†åŠ¡è¯­è°ƒ\r\n        3. åŒ…å«æ–‡åŒ–å‚è€ƒ\r\n        4. æ·»åŠ å½“åœ°ç¥ç¦è¯­\r\n        5. ä½“ç°ä¼ä¸šä¸“ä¸šæ€§\r\n        \"\"\"\r\n        \n        # TODO 2.2: åˆ›å»ºå•†åŠ¡é“¾æ¡\n        # =============== å¼€å§‹ç¼–å†™ ===============\n        \n        \n        \n        # =============== å®Œæˆæäº¤ ===============\n        \n        return \"âœ… å•†åŠ¡ç»ƒä¹ å®Œæˆ - è¯·å®ç°ä½ çš„ç‰ˆæœ¬\"\n    \n    def exercise_03_performance_benchmark(self, chain_func, test_cases: list, iterations: int = 3) -\u003e Dict[str, float]:\n        \"\"\"ğŸ“Š è¿›é˜¶ç»ƒä¹ 3: æ€§èƒ½åŸºå‡†æµ‹è¯•\n        \n        ä»»åŠ¡: ä¸ºä½ çš„é“¾æ¡è¿›è¡Œæ€§èƒ½æµ‹è¯•å¹¶ç”ŸæˆæŠ¥å‘Š\n        è¦æ±‚:\n        - è®°å½•æ‰§è¡Œæ—¶é—´\n        - ç»Ÿè®¡æˆåŠŸç‡\n        - ç”Ÿæˆç®€æ´æŠ¥å‘Š\n        - æä¾›ä¼˜åŒ–å»ºè®®\n        \"\"\"\n        \n        print(f\"ğŸ“Š å¼€å§‹ç¬¬2å±Šç»ƒä¹ : æ€§èƒ½åŸºå‡†æµ‹è¯•\")\n        print(f\"æµ‹è¯•æ¡ˆä¾‹æ•°: {len(test_cases)}\")\n        print(f\"è¿­ä»£æ¬¡æ•°: {iterations}\")\n        \n        # TODO 3.1: å®ç°æ€§èƒ½æµ‹è¯•é€»è¾‘\n        timing_results = []\n        success_count = 0\n        \n       \"for i in range(iterations):\"\n        \"    print(f\"\\nç¬¬{i+1}è½®æµ‹è¯•:\")\",\n     \"  \"      \"\n        \"    # TODO: å®ç°æµ‹è¯•é€»è¾‘\",\n        # =============== å¼€å§‹ç¼–å†™ ===============\n      \"      \n    \"        # 1. è®°å½•å¼€å§‹æ—¶é—´\n        \"        # 2. æ‰§è¡Œé“¾æ¡æµ‹è¯•\n          \"  # 3. è®°å½•ç»“æŸæ—¶é—´",\n        \"    #  4. ç»Ÿè®¡ç»“æœ\n        \"        # 5. é”™è¯¯å¤„ç†\n  \n      \"\\\n        # =============== å®Œæˆæäº¤ ===============\n  \"    \\n        # TODO 3.2: ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š\n        \"        # =============== å¼€å§‹ç¼–å†™ ===============\",\n      \"      \n        \"        # 1. è®¡ç®—å¹³å‡æ—¶é—´\",\n     \"  \"      #  2. ç»Ÿè®¡æˆåŠŸç‡\",\n          \"  # 3. ç”Ÿæˆå»ºè®®\n        \"      # 4. è¿”å›ç»“æœ\n          \"\n        \" =============== å®Œæˆæäº¤ ===============\n       \"     \n   \"     return {\"\n\",        \"avg_response_time\": 0.0,  # TODO: å¡«å…¥å®é™…è®¡ç®—ç»“æœ\n        \"success_rate\": 0.0,  # TODO: å¡«å…¥å®é™…è®¡ç®—ç»“æœ\",\n        \"recommendations\": [\"è¯·å®ç°æ€§èƒ½ä¼˜åŒ–å»ºè®®\"]\n    \"}\n\n# =============== ç»ƒä¹ ä½¿ç”¨ç¤ºä¾‹ ===============\nif __name__ == \"__main__\":\n    exercises = ChainBuildingExercises()\n    \n    print(\"ğŸƒâ€â™‚ï¸ é“¾æ¡æ„å»ºç»ƒä¹ å¼€å§‹ï¼\")\n    print(\"=\"*40)\n    \n    # ğŸƒâ€â™€ï¸ ç»ƒä¹ 1: åŸºç¡€é—®å€™\n    print(\"\\n\\ud83e\\udd1f ç»ƒä¹ 1: åŸºç¡€é“¾æ¡æ„å»º\")\n    result1 = exercises.exercise_01_simple_chain(\"å¼ åŒå­¦\")\n    print(f\"ç»ƒä¹ 1ç»“æœ: {result1}\")\n    \n    # ğŸ¢ ç»ƒä¹ 2: å•†åŠ¡åœºæ™¯\n    print(\"\\ud83d\\udcbc ç»ƒä¹ 2: å•†åŠ¡é—®å€™é“¾æ¡\")\n    business_info = {\n        \"name\": \"ç”°ä¸­ä¸€éƒ\",\n        \"country\": \"æ—¥æœ¬\",  \n        \"language\": \"ä¸­æ–‡\",\n        \"business_domain\": \"åŠ¨æ¼«IPåˆä½œ\"\n    }\n    result2 = exercises.exercise_02_business_greeting(business_info)\n print(f\"ç»ƒä¹ 2ç»“æœ: {result2}\")\n\n    \"print(\"\\n\\ud83c\\udfaf è¯·åœ¨TODOæ³¨é‡Šå¤„å®Œæˆä½ çš„å®ç°ï¼Œç„¶åè¿è¡Œæœ¬æ–‡ä»¶ï¼\")\n    print(\"=\"*40)"\"\","file_path":"/home/ubuntu/learn_langchain1.0_projects/learn_langchain1.0_projects/01_basics/02_first_chain/exercises/chain_building_exercise.py"}